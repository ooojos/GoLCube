<!DOCTYPE html>
<html>

	<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">

		<style>
			.centre {
			  margin: auto;
			  border:1px solid #c3c3c3;
			  width: 640px;
			}
	</style>

	</head>


	<body>
		<div class="centre">
			<canvas id="myCanvas" width="640" height="480" >

			</canvas>
		</div>
		<div class="centre">
			<input type="number" id="cell1" name="cell1" min="0" max="384">	
			<button type="button" id="update" onclick="update()">Update</button>
			<button type="button" id="clearGrid" onclick="clearGrid()">Clear</button>
			<input type="number" id="neighbourtest" name="neighbourtest" min="0" max="384">
			<button type="button" id="drawneighbour" onclick="drawneighbour()">Draw Neighbours</button>		
			<button type="button" id="step" onclick="step()">Step</button>
			<button type="button" id="sspaceship" onclick="sspaceship()">Spaceship</button>	
			<button type="button" id="sspaceship2" onclick="sspaceship2()">Spaceship 2</button>	
			<button type="button" id="sspaceship3" onclick="sspaceship3()">Spaceship 3</button>	
			<button type="button" id="glider" onclick="glider()">glider</button>		
			<button type="button" id="run" onclick="run()">Run</button>				
			<button type="button" id="random" onclick="random()">Rando</button>
			<button type="button" id="a3spaceships" onclick="a3spaceships()">3 Spaceships</button>
		</div>
		
		<div class="centre">
			<img src="https://i.imgur.com/gdd13Oq.png" alt="grid showing cell indexes">
		</div>
		
		
		<script>
			var canvas = document.getElementById("myCanvas");
			var ctx = canvas.getContext("2d");
			ctx.strokeStyle = "#000000";
			
			var cells = [];

			var facexoffsets = [320, 0, 160, 320, 480, 320];
			var faceyoffsets = [0, 160, 160, 160, 160, 320];


			var i;
			var j;
			
			var nmap = [[[1000,71,70,69,68,67,66,65,64,1000],
[128,0,1,2,3,4,5,6,7,263],
[129,8,9,10,11,12,13,14,15,262],
[130,16,17,18,19,20,21,22,23,261],
[131,24,25,26,27,28,29,30,31,260],
[132,32,33,34,35,36,37,38,39,259],
[133,40,41,42,43,44,45,46,47,258],
[134,48,49,50,51,52,53,54,55,257],
[135,56,57,58,59,60,61,62,63,256],
[1000,192,193,194,195,196,197,198,199,1000]],

[[1000,7,6,5,4,3,2,1,0,1000],
[263,64,65,66,67,68,69,70,71,128],
[271,72,73,74,75,76,77,78,79,136],
[279,80,81,82,83,84,85,86,87,144],
[287,88,89,90,91,92,93,94,95,152],
[295,96,97,98,99,100,101,102,103,160],
[303,104,105,106,107,108,109,110,111,168],
[311,112,113,114,115,116,117,118,119,176],
[319,120,121,122,123,124,125,126,127,184],
[1000,383,382,381,380,379,378,377,376,1000]],

[[1000,0,8,16,24,32,40,48,56,1000],
[71,128,129,130,131,132,133,134,135,192],
[79,136,137,138,139,140,141,142,143,200],
[87,144,145,146,147,148,149,150,151,208],
[95,152,153,154,155,156,157,158,159,216],
[103,160,161,162,163,164,165,166,167,224],
[111,168,169,170,171,172,173,174,175,232],
[119,176,177,178,179,180,181,182,183,240],
[127,184,185,186,187,188,189,190,191,248],
[1000,376,368,360,352,344,336,328,320,1000]],

[[1000,56,57,58,59,60,61,62,63,1000],
[135,192,193,194,195,196,197,198,199,256],
[143,200,201,202,203,204,205,206,207,264],
[151,208,209,210,211,212,213,214,215,272],
[159,216,217,218,219,220,221,222,223,280],
[167,224,225,226,227,228,229,230,231,288],
[175,232,233,234,235,236,237,238,239,296],
[183,240,241,242,243,244,245,246,247,304],
[191,248,249,250,251,252,253,254,255,312],
[1000,320,321,322,323,324,325,326,327,1000]],

[[1000,63,55,47,39,31,23,15,7,1000],
[199,256,257,258,259,260,261,262,263,64],
[207,264,265,266,267,268,269,270,271,72],
[215,272,273,274,275,276,277,278,279,80],
[223,280,281,282,283,284,285,286,287,88],
[231,288,289,290,291,292,293,294,295,96],
[239,296,297,298,299,300,301,302,303,104],
[247,304,305,306,307,308,309,310,311,112],
[255,312,313,314,315,316,317,318,319,120],
[1000,327,335,343,351,359,367,375,383,1000]],

[[1000,248,249,250,251,252,253,254,255,1000],
[191,320,321,322,323,324,325,326,327,312],
[190,328,329,330,331,332,333,334,335,313],
[189,336,337,338,339,340,341,342,343,314],
[188,344,345,346,347,348,349,350,351,315],
[187,352,353,354,355,356,357,358,359,316],
[186,360,361,362,363,364,365,366,367,317],
[185,368,369,370,371,372,373,374,375,318],
[184,376,377,378,379,380,381,382,383,319],
[1000,127,126,125,124,123,122,121,120,1000]]];
			

//			console.log(nmap[5][9][9]);
			

			for(j=0;j<6;j++)
			{
				for(i=0;i<64;i++)
				{
					var buildneighbours = [];
					buildneighbours.push(nmap[j][Math.floor((i/8))+1-1][(i%8)+1-1]);
					buildneighbours.push(nmap[j][Math.floor((i/8))+1-1][(i%8)+1]);
					buildneighbours.push(nmap[j][Math.floor((i/8))+1-1][(i%8)+1+1]);
					buildneighbours.push(nmap[j][Math.floor((i/8))+1][(i%8)+1-1]);
					buildneighbours.push(nmap[j][Math.floor((i/8))+1][(i%8)+1+1]);
					buildneighbours.push(nmap[j][Math.floor((i/8))+1+1][(i%8)+1-1]);
					buildneighbours.push(nmap[j][Math.floor((i/8))+1+1][(i%8)+1]);
					buildneighbours.push(nmap[j][Math.floor((i/8))+1+1][(i%8)+1+1]);
					
					cells.push({face:j, status:false, row:Math.floor(i/8), col:i%8, neighbours:buildneighbours});
				}
			}
			
			
			draw();
			
			
			
			
			function draw(){
				ctx.clearRect(0,0,640,480);
				for(i=0;i<384;i++)
				{
					if(cells[i].status){
						ctx.fillRect(cells[i].col*20+facexoffsets[cells[i].face], cells[i].row*20+faceyoffsets[cells[i].face], 20, 20);
					}
					else{
						ctx.strokeRect(cells[i].col*20+facexoffsets[cells[i].face], cells[i].row*20+faceyoffsets[cells[i].face], 20, 20);
					}
				}
			}
			
			function update(){
				cells[document.getElementById("cell1").value].status = true;
				draw();

			}
			
			function clearGrid(){
				var k;
				for(k=0; k<384;k++){
					cells[k].status=false;
				}
				draw();

			}
			
			function drawneighbour(){
				var ab;
				var inval = document.getElementById("neighbourtest").value;
				
				var nlist = cells[inval].neighbours;
				console.log(nlist);
				for(ab=0;ab<8;ab++)
				{
					if(nlist[ab] != 1000){
						cells[nlist[ab]].status = true;
						draw();
					}
				}
			}
			
			function step(){
				var ac;
				var nextgen = [];
				var ae;
				for(ae=0;ae<384;ae++){
					nextgen[ae]=false;
				}
				console.log(nextgen);
				for(ac=0;ac<384;ac++)
				{
					var nlist = cells[ac].neighbours;
					var ad;
					var numNeighbours = 0;
					for(ad=0;ad<8;ad++){
						if(nlist[ad] != 1000){
							if(cells[nlist[ad]].status){
								numNeighbours++;
							}
						}
					}
					if(numNeighbours == 3){
						nextgen[ac] = true;
					}
					if(cells[ac].status && numNeighbours == 2){
						nextgen[ac] = true;
					}
				}
				var af;
				console.log(nextgen);
				for(af=0;af<384;af++){
					if(nextgen[af]){
						cells[af].status = true;
					}
					else{
						cells[af].status = false;
					}
				}
				draw();
			}
			
			function sspaceship(){
				cells[81].status = true;
				cells[97].status = true;
				cells[106].status = true;
				cells[107].status = true;
				cells[108].status = true;
				cells[109].status = true;
				cells[101].status = true;
				cells[93].status = true;
				cells[84].status = true;
				draw();
			}
			
			function sspaceship2(){
				cells[203].status = true;
				cells[204].status = true;
				cells[205].status = true;
				cells[213].status = true;
				cells[221].status = true;
				cells[229].status = true;
				cells[236].status = true;
				cells[210].status = true;
				cells[234].status = true;
				draw();
			}
			function sspaceship3(){
				cells[265].status = true;
				cells[258].status = true;
				cells[259].status = true;
				cells[260].status = true;
				cells[268].status = true;
				cells[276].status = true;
				cells[284].status = true;
				cells[291].status = true;
				cells[289].status = true;
				draw();
			}
			
			function a3spaceships(){
				cells[51].status = true;
				cells[52].status = true;
				cells[53].status = true;
				cells[62].status = true;
				cells[59].status = true;
				cells[195].status = true;
				cells[203].status = true;
				cells[212].status = true;
				cells[214].status = true;
				
				cells[83].status = true;
				cells[86].status = true;
				cells[95].status = true;
				cells[103].status = true;
				cells[111].status = true;
				cells[110].status = true;
				cells[109].status = true;
				cells[108].status = true;
				cells[99].status = true;
				
				cells[329].status = true;
				cells[332].status = true;
				cells[341].status = true;
				cells[349].status = true;
				cells[357].status = true;
				cells[356].status = true;
				cells[355].status = true;
				cells[354].status = true;
				cells[345].status = true;
				draw();
			}			
			
			
			function glider(){
				cells[210].status = true;
				cells[203].status = true;
				cells[204].status = true;
				cells[212].status = true;
				cells[220].status = true;
				draw();
			}
			
			function run(){
				setTimeout(step,100);
				setTimeout(step,200);
				setTimeout(step,300);
				setTimeout(step,400);
				setTimeout(step,500);
				setTimeout(step,600);
				setTimeout(step,700);
				setTimeout(step,800);
				setTimeout(step,900);
				setTimeout(step,1000);
			}
				
			
			function random(){
				var ag;
				for(ag=0;ag<384;ag++){
					if(Math.random() < 0.5){
						cells[ag].status=true;
					}
					else{
						cells[ag].status=false;
					}
				}
				draw();
						
			}
			
			
			

		</script>



	</body>
	
	
	
	
</html>
